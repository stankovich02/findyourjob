function printJobs(e){let t="";e.forEach(e=>{t+=e}),t+=`<nav aria-label="..." class="d-flex justify-content-center mt-5">
                        <ul class="pagination pagination-sm">
                        </ul>
                    </nav>`,$("#allJobs").html(t)}function filterJobs(e){let t=$("#jobKeyword").val().trim(),a=$("#jobCategory").val(),o=$("#jobSeniority").val(),l=$("#Cities").val(),i=$("#workType").val(),n=$("#workPlace").val(),s=$("#Technologies").val(),r=$("#jobSalary").is(":checked"),c=$("#latestJobs").is(":checked");$.ajax({url:"/jobs/filter",method:"GET",data:{keyword:t,category:a,seniority:o,cities:l,technologies:s,workplace:n,workType:i,salary:r,latestJobs:c,page:e},success:function(e){printJobs(e.html),makePagination(e)},error:function(e){console.log(e)}})}function makePagination(e){let t=e.jobs.current_page,a=e.jobs.last_page,o="";if(a>1)for(let l=1;l<=a;l++)l===t?o+=`
                    <li class="page-item active" aria-current="page">
                        <span class="page-link px-3 py-2">${l}</span>
                    </li>`:o+=`<li class="page-item"><a class="page-link px-3 py-2 pageLink" href="">${l}</a></li>`;$(".pagination").html(o),$(".pageLink").click(function(e){e.preventDefault();filterJobs($(this).html())})}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),fetch("/api/cities").then(e=>e.json()).then(e=>{let t=e.map(e=>({label:e.name,value:e.id}));VirtualSelect.init({ele:"#Cities",options:t,multiple:!0,search:!0,maxWidth:"100%"})}),fetch("/api/technologies").then(e=>e.json()).then(e=>{let t=e.map(e=>({label:e.name,value:e.id}));VirtualSelect.init({ele:"#Technologies",options:t,multiple:!0,search:!0,maxWidth:"100%"})}),$(window).on("load",function(){if(localStorage.getItem("category")){let e=localStorage.getItem("category");$("#jobCategory").val(e),localStorage.removeItem("category"),filterJobs(1)}}),$("#filterJobs").click(function(e){e.preventDefault(),filterJobs(1)}),$(".pageLink").click(function(e){e.preventDefault();filterJobs($(this).html())});let deleteButtons=document.querySelectorAll(".deleteJob a");deleteButtons.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let a=e.parentElement.nextElementSibling.querySelector(".jobName").innerHTML;$(".modal-body p").html(`Are you sure you want to delete "${a}" job?`),$(".modal").css("display","block"),$("#closeModal").click(function(){$(".modal").css("display","none")}),$("#deleteModal").click(function(){let t=e.getAttribute("data-id");$.ajax({url:"/jobs/"+t,method:"DELETE",success:function(){location.reload()},error:function(e){let t="";for(let a in e.responseJSON.errors)t+=e.responseJSON.errors[a]+"<br>";$(".modal-body p").html(t),$(".modal-footer").css("display","none"),$(".modal").css("display","block"),setTimeout(()=>{$(".modal").css("display","none")},3e3)}})})})}),$(".saveJob").click(function(e){e.preventDefault();let t=$(this).attr("data-id"),a=this.querySelector("i");$.ajax({url:"/jobs/save/"+t,method:"POST",data:{jobID:t},success:function(e){"far fa-heart text-primary"===a.className?setTimeout(()=>{a.className="fas fa-heart text-primary"},1e3):setTimeout(()=>{a.className="far fa-heart text-primary"},1e3),"/account"===window.location.pathname&&location.reload()},error:function(e){let t="";for(let a in e.responseJSON.errors)t+=e.responseJSON.errors[a]+"<br>";showModal(t)}})});
